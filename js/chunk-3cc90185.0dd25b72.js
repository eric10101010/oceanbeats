(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3cc90185"],{"1dde":function(t,e,c){var s=c("d039"),r=c("b622"),n=c("2d00"),l=r("species");t.exports=function(t){return n>=51||!s((function(){var e=[],c=e.constructor={};return c[l]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"4fad":function(t,e,c){var s=c("23e7"),r=c("6f53").entries;s({target:"Object",stat:!0},{entries:function(t){return r(t)}})},"6f53":function(t,e,c){var s=c("83ab"),r=c("df75"),n=c("fc6a"),l=c("d1e7").f,o=function(t){return function(e){var c,o=n(e),a=r(o),i=a.length,d=0,b=[];while(i>d)c=a[d++],s&&!l.call(o,c)||b.push(t?[c,o[c]]:o[c]);return b}};t.exports={entries:o(!0),values:o(!1)}},7104:function(t,e,c){"use strict";c("c7af")},8418:function(t,e,c){"use strict";var s=c("c04e"),r=c("9bf2"),n=c("5c6c");t.exports=function(t,e,c){var l=s(e);l in t?r.f(t,l,n(0,c)):t[l]=c}},8469:function(t,e,c){"use strict";c.r(e);c("b0c0");var s=c("7a23"),r=Object(s["R"])("data-v-0fad96ec");Object(s["y"])("data-v-0fad96ec");var n=Object(s["h"])("div",{class:"banner container-fluid d-flex align-items-center justify-content-center my-5"},[Object(s["h"])("div",{class:"row banner-box p-3 w-100"},[Object(s["h"])("div",{class:"text-white text-center "},[Object(s["h"])("h2",{class:"text-center p-4"},"結帳")])])],-1),l={class:"container mb-6"},o={class:"row d-flex justify-content-evenly"},a={class:"d-flex"},i={class:"steps list-unstyled d-flex justify-content-between position-relative mx-auto mb-5"},d=Object(s["h"])("li",{class:"steps-item w-33 px-4 py-2"},[Object(s["h"])("p",{class:"steps-circle d-flex justify-content-center align-items-center"},[Object(s["h"])("i",{class:"bi bi-check-circle text-success",style:{"font-size":"50px"}})]),Object(s["g"])(" 資料填寫 ")],-1),b={key:0,class:"steps-circle d-flex justify-content-center align-items-center"},h=Object(s["h"])("i",{class:"bi bi-check-circle text-success",style:{"font-size":"50px"}},null,-1),u={key:1,class:"steps-circle d-flex justify-content-center align-items-center bg-danger"},j=Object(s["h"])("span",{class:"h3 text-white text-center pt-2"},"2",-1),O=Object(s["g"])(" 訂單建立 "),p={key:0,class:"steps-circle d-flex justify-content-center align-items-center bg-danger"},f=Object(s["h"])("span",{class:"h3 text-white text-center pt-2"},"3",-1),x={key:1,class:"steps-circle d-flex justify-content-center align-items-center bg-third"},g=Object(s["h"])("span",{class:"h3 text-white text-center pt-2"},"3",-1),m=Object(s["g"])(" 付款完成 "),v={class:"col-lg-5 col-md-5 col-12 mb-4"},y={class:"col-lg-12 p-0 border border-third"},w={key:0,class:"text-center p-3 mb-2 bg-secondary text-light"},k={key:1,class:"text-center p-3 mb-2 bg-secondary text-light"},_={key:2,class:"table mb-0"},F=Object(s["h"])("th",{scope:"col",width:"110",class:"text-left"},"收件人姓名:",-1),D=Object(s["h"])("th",{scope:"col",width:"110",class:"text-left"},"收件人電話:",-1),T=Object(s["h"])("th",{scope:"col",width:"110",class:"text-left"},"收件人地址:",-1),E=Object(s["h"])("th",{scope:"col",width:"110",class:"text-left"},"電子郵件:",-1),I=Object(s["h"])("th",{scope:"col",width:"110",class:"text-left"},"付款方式:",-1),$={key:0},P=Object(s["h"])("th",{scope:"col",width:"110",class:"text-left"},"備註:",-1),C={key:1},N=Object(s["h"])("th",{scope:"col",width:"110",class:"text-left"},"備註:",-1),Z=Object(s["h"])("td",{class:"text-danger"},"無",-1),z={class:"status"},B=Object(s["h"])("h3",{class:"text-center p-3 bg-secondary text-light mb-4"},"付款狀態",-1),J={key:0,class:"col-xl-12 col-md-12 col-12 p-0"},M=Object(s["h"])("div",{class:"d-flex justify-content-center align-items-center flex-column"},[Object(s["h"])("img",{src:"https://i.imgur.com/EwjxudG.png",alt:"pay-unsuccess"}),Object(s["h"])("p",{class:"text-danger pt-3"},"目前尚未付款")],-1),S={key:1,class:"col-xl-12 col-md-12 col-12 p-0"},q=Object(s["h"])("div",{class:"status d-flex justify-content-center align-items-center flex-column"},[Object(s["h"])("img",{src:"https://i.imgur.com/sEaN24V.png",alt:"pay-success"}),Object(s["h"])("p",{class:"text-success pt-3"},"已成功付款，感謝您的訂單!")],-1),A={key:3,class:"d-flex justify-content-around my-2"},G=Object(s["g"])(" 返回購物 "),R={key:4,class:"d-flex justify-content-center"},U=Object(s["g"])(" 繼續購物 "),V={class:"col-lg-5 col-md-5 col-12"},W={class:"col-lg-12 p-0 border border-third mb-4 d-flex flex-column justify-content-between"},Y={class:"order-information"},H=Object(s["h"])("h3",{class:"text-center p-3 bg-secondary text-light mb-2"},"訂單資訊",-1),K={class:"col-xl-12 col-md-12 col-12 p-0"},L={class:"d-flex justify-content-center align-items-center flex-column"},Q={key:0,class:"table mb-0 "},X=Object(s["h"])("th",{scope:"col",width:"110",class:"text-left"},"訂單時間:",-1),tt=Object(s["h"])("th",{scope:"col",width:"110",class:"text-left"},"訂單編號:",-1),et=Object(s["h"])("th",{scope:"col",width:"110",class:"text-left"},"訂單金額:",-1),ct={class:"col-lg-12 p-0 border border-third"},st={class:"order-detail d-flex flex-column "},rt=Object(s["h"])("h3",{class:"text-center p-3 mb-2 bg-secondary text-light"}," 訂單明細 ",-1),nt={class:"mb-0"},lt=Object(s["h"])("thead",{class:"cart-list mb-2 border-bottom border-third "},[Object(s["h"])("tr",{class:"text-center"},[Object(s["h"])("th",{scope:"col",width:"25%"}," 商品圖片 "),Object(s["h"])("th",{scope:"col",width:"25%"}," 商品名稱 "),Object(s["h"])("th",{scope:"col",width:"25%"}," 數量 "),Object(s["h"])("th",{scope:"col",width:"25%"}," 小記 ")])],-1),ot={scope:"row",class:"text-center"},at={class:"text-center"},it={class:"text-center"},dt={class:"text-center"};Object(s["w"])();var bt=r((function(t,e,c,bt,ht,ut){var jt=Object(s["C"])("router-link");return Object(s["v"])(),Object(s["d"])("div",null,[n,Object(s["h"])("div",l,[Object(s["h"])("div",o,[Object(s["h"])("div",a,[Object(s["h"])("ul",i,[d,Object(s["h"])("li",{class:["steps-item w-33 px-4 py-2",{active:!t.isPaid,success:t.isPaid||ht.order.is_paid}]},[t.isPaid||ht.order.is_paid?(Object(s["v"])(),Object(s["d"])("p",b,[h])):(Object(s["v"])(),Object(s["d"])("p",u,[j])),O],2),Object(s["h"])("li",{class:["steps-item w-33 px-4 py-2",{active:t.isPaid,success:ht.order.is_paid}]},[t.isPaid||ht.order.is_paid?(Object(s["v"])(),Object(s["d"])("p",p,[f])):(Object(s["v"])(),Object(s["d"])("p",x,[g])),m],2)])]),Object(s["h"])("div",v,[Object(s["h"])("div",y,[ht.order.is_paid?(Object(s["v"])(),Object(s["d"])("h3",k,"訂購者資訊")):(Object(s["v"])(),Object(s["d"])("h3",w,"確認訂購資訊")),ht.order.user?(Object(s["v"])(),Object(s["d"])("table",_,[Object(s["h"])("tbody",null,[Object(s["h"])("tr",null,[F,Object(s["h"])("td",null,Object(s["F"])(ht.order.user.name),1)]),Object(s["h"])("tr",null,[D,Object(s["h"])("td",null,Object(s["F"])(ht.order.user.tel),1)]),Object(s["h"])("tr",null,[T,Object(s["h"])("td",null,Object(s["F"])(ht.order.user.address),1)]),Object(s["h"])("tr",null,[E,Object(s["h"])("td",null,Object(s["F"])(ht.order.user.email),1)]),Object(s["h"])("tr",null,[I,Object(s["h"])("td",null,Object(s["F"])(ht.order.user.payWay),1)]),ht.order.message?(Object(s["v"])(),Object(s["d"])("tr",$,[P,Object(s["h"])("td",null,Object(s["F"])(ht.order.message),1)])):(Object(s["v"])(),Object(s["d"])("tr",C,[N,Z]))])])):Object(s["e"])("",!0),Object(s["h"])("div",z,[B,ht.order.is_paid?(Object(s["v"])(),Object(s["d"])("div",S,[q])):(Object(s["v"])(),Object(s["d"])("div",J,[M]))]),!1===ht.order.is_paid?(Object(s["v"])(),Object(s["d"])("div",A,[Object(s["h"])(jt,{to:"/products",class:"btn btn-secondary text-light d-flex align-items-center"},{default:r((function(){return[G]})),_:1}),Object(s["h"])("button",{class:"btn btn btn-danger d-flex align-items-center",onClick:e[1]||(e[1]=function(){return ut.payOrder&&ut.payOrder.apply(ut,arguments)})}," 付款結帳 ")])):Object(s["e"])("",!0),!0===ht.order.is_paid?(Object(s["v"])(),Object(s["d"])("div",R,[Object(s["h"])(jt,{to:"/products",class:"btn btn-secondary text-light d-flex align-items-center my-2"},{default:r((function(){return[U]})),_:1})])):Object(s["e"])("",!0)])]),Object(s["h"])("div",V,[Object(s["h"])("div",W,[Object(s["h"])("div",Y,[H,Object(s["h"])("div",K,[Object(s["h"])("div",L,[ht.order.user?(Object(s["v"])(),Object(s["d"])("table",Q,[Object(s["h"])("tbody",null,[Object(s["h"])("tr",null,[X,Object(s["h"])("td",null,Object(s["F"])(ut.timestampToDate(ht.order.create_at)),1)]),Object(s["h"])("tr",null,[tt,Object(s["h"])("td",null,Object(s["F"])(ht.order.id),1)]),Object(s["h"])("tr",null,[et,Object(s["h"])("td",{class:["fw-bolder",{"text-success":ht.order.is_paid,"text-danger":!ht.order.is_paid}]}," NT$"+Object(s["F"])(ht.order.total),3)])])])):Object(s["e"])("",!0)])])])]),Object(s["h"])("div",ct,[Object(s["h"])("div",st,[rt,Object(s["h"])("table",nt,[lt,Object(s["h"])("tbody",null,[(Object(s["v"])(!0),Object(s["d"])(s["a"],null,Object(s["B"])(ht.products,(function(t){return Object(s["v"])(),Object(s["d"])("tr",{key:t.id,class:"border-bottom"},[Object(s["h"])("th",ot,[Object(s["h"])("img",{src:t[1].product.imageUrl,alt:"",class:"cart-img",style:{"max-height":"100px"}},null,8,["src"])]),Object(s["h"])("td",at,Object(s["F"])(t[1].product.title),1),Object(s["h"])("td",it,Object(s["F"])(t[1].qty),1),Object(s["h"])("td",dt,"NT$"+Object(s["F"])(t[1].total),1)])})),128))])])])])])])])])})),ht=(c("99af"),c("159b"),c("4fad"),{data:function(){return{order:{},orderID:"",products:[],productId:[],message:"",date:new Date}},methods:{getOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("item666","/order/").concat(this.$route.params.id);this.$http.get(e).then((function(e){e.data.success?(t.order.total=parseInt(t.order.total),t.productId=[],t.products=[],t.order=e.data.order,t.user=e.data.order.user,t.order.paid_date=t.DateToTimestamp(t.order.paid_date),Object.entries(t.order.products).forEach((function(e){t.products.push(e)})),t.productId.forEach((function(e){t.products.push(t.order.products[e])}))):(alert(e.data.message),console.log("error"))})).catch((function(t){console.log(t)}))},sumData:function(t){for(var e=0,c=0;c<t.length;c++)e+=t[c];return e},payOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("item666","/pay/").concat(this.order.id);this.$http.post(e).then((function(e){console.log(e),t.$swal({title:"已成功結帳",icon:"success"}),t.getOrder()})).catch((function(t){console.log(t)}))},DateToTimestamp:function(t){return Date.parse(t)/1e3},timestampToDate:function(t){if(t){var e=new Date(1e3*t);return"".concat(e.getFullYear(),"-").concat(this.adjustZero(e.getMonth()+1),"-").concat(this.adjustZero(e.getDate()))}},adjustZero:function(t){return t<10?"0".concat(t):"".concat(t)}},created:function(){this.getOrder()}});c("7104");ht.render=bt,ht.__scopeId="data-v-0fad96ec";e["default"]=ht},"99af":function(t,e,c){"use strict";var s=c("23e7"),r=c("d039"),n=c("e8b5"),l=c("861d"),o=c("7b0b"),a=c("50c4"),i=c("8418"),d=c("65f0"),b=c("1dde"),h=c("b622"),u=c("2d00"),j=h("isConcatSpreadable"),O=9007199254740991,p="Maximum allowed index exceeded",f=u>=51||!r((function(){var t=[];return t[j]=!1,t.concat()[0]!==t})),x=b("concat"),g=function(t){if(!l(t))return!1;var e=t[j];return void 0!==e?!!e:n(t)},m=!f||!x;s({target:"Array",proto:!0,forced:m},{concat:function(t){var e,c,s,r,n,l=o(this),b=d(l,0),h=0;for(e=-1,s=arguments.length;e<s;e++)if(n=-1===e?l:arguments[e],g(n)){if(r=a(n.length),h+r>O)throw TypeError(p);for(c=0;c<r;c++,h++)c in n&&i(b,h,n[c])}else{if(h>=O)throw TypeError(p);i(b,h++,n)}return b.length=h,b}})},b0c0:function(t,e,c){var s=c("83ab"),r=c("9bf2").f,n=Function.prototype,l=n.toString,o=/^\s*function ([^ (]*)/,a="name";s&&!(a in n)&&r(n,a,{configurable:!0,get:function(){try{return l.call(this).match(o)[1]}catch(t){return""}}})},c7af:function(t,e,c){}}]);
//# sourceMappingURL=chunk-3cc90185.0dd25b72.js.map