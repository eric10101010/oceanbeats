(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6516ff98"],{"1dde":function(t,e,a){var c=a("d039"),o=a("b622"),r=a("2d00"),s=o("species");t.exports=function(t){return r>=51||!c((function(){var e=[],a=e.constructor={};return a[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},5651:function(t,e,a){"use strict";a.r(e);var c=a("7a23"),o={class:"col-11 py-20 fw-bolder"},r=Object(c["h"])("h2",{class:"text-center text-primary pt-14 pt-md-20 mt-6 mb-6"},"訂單列表",-1),s={class:"container vh-100"},l={class:"table table-hover fw-bolder border border-third"},n=Object(c["h"])("thead",{class:"bg-secondary border border-primary"},[Object(c["h"])("tr",{class:"text-center text-light"},[Object(c["h"])("th",{scope:"col",width:"3%",class:"text-center"},"序號"),Object(c["h"])("th",{scope:"col",width:"3%",class:"text-start px-6"},"訂單編號"),Object(c["h"])("th",{scope:"col",width:"5%",class:"text-start"},"訂購日期"),Object(c["h"])("th",{scope:"col",width:"5%",class:"text-center"},"訂單金額"),Object(c["h"])("th",{scope:"col",width:"5%"},"付款狀態"),Object(c["h"])("th",{scope:"col",width:"5%"},"編輯")])],-1),d={scope:"row",class:"text-center"},i={class:"text-start px-6"},b={class:"text-start"},u={key:0,class:"text-success ms-1"},h={key:1,class:"text-danger ms-1"},m={class:"d-flex justify-content-center mt-4"};function p(t,e,a,p,O,j){var f=Object(c["C"])("Pagination"),g=Object(c["C"])("OrderModal");return Object(c["v"])(),Object(c["d"])(c["a"],null,[Object(c["h"])("div",o,[r,Object(c["h"])("div",s,[Object(c["h"])("table",l,[n,Object(c["h"])("tbody",null,[(Object(c["v"])(!0),Object(c["d"])(c["a"],null,Object(c["B"])(O.orders,(function(t){return Object(c["v"])(),Object(c["d"])("tr",{key:t.id,class:"text-center"},[Object(c["h"])("th",d,Object(c["F"])(t.num),1),Object(c["h"])("td",i,Object(c["F"])(t.id),1),Object(c["h"])("td",b,Object(c["F"])(j.timestampToDate(t.create_at)),1),Object(c["h"])("td",null,Object(c["F"])(t.total),1),Object(c["h"])("td",null,[t.is_paid?(Object(c["v"])(),Object(c["d"])("span",u,"已付款")):(Object(c["v"])(),Object(c["d"])("span",h,"未付款"))]),Object(c["h"])("td",null,[Object(c["h"])("button",{type:"button",class:"btn btn-outline-primary btn-sm me-4","data-bs-toggle":"modal","data-bs-target":"#orderModal",onClick:function(e){return j.adjustStatus(!1,t,"put")}}," 編輯 ",8,["onClick"]),Object(c["h"])("button",{type:"button",class:"btn btn-outline-danger btn-sm","data-bs-toggle":"modal","data-bs-target":"#orderModal",onClick:function(e){return j.adjustStatus(!1,t,"del")}}," 刪除 ",8,["onClick"])])])})),128))])]),Object(c["h"])("div",m,[Object(c["h"])(f,{page:O.pagination,onGetProduct:j.getOrder},null,8,["page","onGetProduct"])])])]),Object(c["h"])(g,{ref:"modal",temp:t.tempOrder,action:t.action,status:O.status,onGetOrder:j.getOrder,onDelItem:j.delOrder},null,8,["temp","action","status","onGetOrder","onDelItem"])],64)}a("99af");var O=a("1799"),j=(a("b0c0"),{id:"orderModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"orderModalLabel","aria-hidden":"true"}),f={key:0,class:"modal-dialog modal-xl modal-dialog-centered"},g={class:"modal-content border-0"},v=Object(c["h"])("div",{class:"modal-header bg-primary text-white"},[Object(c["h"])("h5",{id:"productModalLabel",class:"modal-title"},[Object(c["h"])("span",null,"編輯訂單")]),Object(c["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),x={class:"modal-body d-flex flex-column "},y={class:"row d-flex justify-content-evenly"},w={class:"order-block col-md-5 col-xl-5 "},_=Object(c["h"])("h3",{class:"text-primary fw-bolder"},"顧客資訊",-1),D={class:"order-name mb-3"},$=Object(c["h"])("label",{for:"name",class:"h5 mb-2"},"姓名:",-1),M={class:"order-tel mb-3"},T=Object(c["h"])("label",{for:"tel",class:"h5 mb-2"},"電話:",-1),F={class:"order-email mb-3"},k=Object(c["h"])("label",{for:"email",class:"h5 mb-2"},"信箱:",-1),P={class:"order-address mb-3"},C=Object(c["h"])("label",{for:"address",class:"h5 mb-2"},"地址:",-1),A={class:"order-payWay mb-3"},U=Object(c["h"])("label",{for:"payWay",class:"form-label"},"付款方式:",-1),L={class:"input-group mb-0 mt-2"},S=Object(c["g"])("| "),V=Object(c["h"])("option",{value:"0",disabled:"disabled",selected:""},"請選擇付款方式",-1),J=Object(c["h"])("option",{value:"超商付款"},"超商付款",-1),Z=Object(c["h"])("option",{value:"ATM付款"},"ATM付款",-1),I=Object(c["h"])("option",{value:"網路ATM付款"},"網路ATM付款",-1),K={class:"order_item_group mb-3"},G=Object(c["h"])("label",{for:"create_time",class:"h5 mb-2"},"備註:",-1),W={class:"order_item_group mb-3"},B=Object(c["h"])("h3",{class:"text-primary fw-bolder"},"付款狀態",-1),N={class:"col-lg-6 col-md-6 col-6"},E=Object(c["h"])("label",{for:"is_paid"},"選擇狀態:",-1),Y={class:"input-group mb-0 mt-2"},q=Object(c["h"])("option",{value:"true"},"已付款",-1),z=Object(c["h"])("option",{value:"false"},"未付款",-1),H={class:"form-group col-md-5 col-xl-5"},Q=Object(c["h"])("h3",{class:"text-primary fw-bolder"},"訂單資訊",-1),R={class:"order_item_group py-2"},X=Object(c["h"])("span",{class:"me-3 h5"},"訂購日期:",-1),tt={class:"h6"},et={class:"order_item_group mb-3"},at=Object(c["h"])("span",{class:"me-3 h5"},"訂單編號:",-1),ct={class:"h6"},ot={class:"form-group col-md-6 col-xl-12 mt-5"},rt=Object(c["h"])("h3",{class:"text-primary fw-bolder"},"訂單明細",-1),st={class:"order-list col-xl-12 col-md-12 "},lt=Object(c["h"])("thead",{class:"bg-secondary text-light boreder border-third "},[Object(c["h"])("tr",{class:"text-center"},[Object(c["h"])("th",{scope:"col",width:"34%"},"商品資訊"),Object(c["h"])("th",{scope:"col",width:"22%"},"售價"),Object(c["h"])("th",{scope:"col",width:"22%"},"數量"),Object(c["h"])("th",{scope:"col",width:"22%"},"小計")])],-1),nt={class:"text-center"},dt={class:"mx-3"},it={class:"price-total text-end mt-3"},bt=Object(c["h"])("span",{class:"me-2 h5"},"總金額:",-1),ut={class:"text-danger me-4 h4"},ht={class:"modal-footer"},mt=Object(c["h"])("button",{type:"button",class:"btn btn-outline-danger","data-bs-dismiss":"modal"}," 取消 ",-1);function pt(t,e,a,o,r,s){var l=Object(c["C"])("OrderDelModal");return Object(c["v"])(),Object(c["d"])("div",j,["put"===a.status?(Object(c["v"])(),Object(c["d"])("div",f,[Object(c["h"])("div",g,[v,Object(c["h"])("div",x,[Object(c["h"])("div",y,[Object(c["h"])("div",w,[_,Object(c["h"])("div",D,[$,Object(c["P"])(Object(c["h"])("input",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return r.tempOrder.user.name=t}),class:"form-control",type:"text"},null,512),[[c["K"],r.tempOrder.user.name]])]),Object(c["h"])("div",M,[T,Object(c["P"])(Object(c["h"])("input",{"onUpdate:modelValue":e[2]||(e[2]=function(t){return r.tempOrder.user.tel=t}),class:"form-control",type:"tel"},null,512),[[c["K"],r.tempOrder.user.tel]])]),Object(c["h"])("div",F,[k,Object(c["P"])(Object(c["h"])("input",{"onUpdate:modelValue":e[3]||(e[3]=function(t){return r.tempOrder.user.email=t}),class:"form-control",type:"text"},null,512),[[c["K"],r.tempOrder.user.email]])]),Object(c["h"])("div",P,[C,Object(c["P"])(Object(c["h"])("input",{"onUpdate:modelValue":e[4]||(e[4]=function(t){return r.tempOrder.user.address=t}),class:"form-control",type:"text"},null,512),[[c["K"],r.tempOrder.user.address]])]),Object(c["h"])("div",A,[U,Object(c["h"])("div",L,[Object(c["P"])(Object(c["h"])("select",{class:"form-select","onUpdate:modelValue":e[5]||(e[5]=function(t){return r.tempOrder.user.payWay=t})},[S,V,J,Z,I],512),[[c["J"],r.tempOrder.user.payWay]])])]),Object(c["h"])("div",K,[G,Object(c["P"])(Object(c["h"])("input",{"onUpdate:modelValue":e[6]||(e[6]=function(t){return r.tempOrder.message=t}),class:"form-control",type:"text"},null,512),[[c["K"],r.tempOrder.message]])]),Object(c["h"])("div",W,[B,Object(c["h"])("div",N,[E,Object(c["h"])("div",Y,[Object(c["P"])(Object(c["h"])("select",{class:"form-select",id:"is_paid","onUpdate:modelValue":e[7]||(e[7]=function(t){return r.tempOrder.is_paid=t})},[q,z],512),[[c["J"],r.tempOrder.is_paid]])])])])]),Object(c["h"])("div",H,[Q,Object(c["h"])("div",R,[X,Object(c["h"])("span",tt,Object(c["F"])(s.timestampToDate(r.tempOrder.create_at)),1)]),Object(c["h"])("div",et,[at,Object(c["h"])("span",ct,Object(c["F"])(r.tempOrder.id),1)]),Object(c["h"])("div",ot,[rt,Object(c["h"])("table",st,[lt,Object(c["h"])("tbody",nt,[(Object(c["v"])(!0),Object(c["d"])(c["a"],null,Object(c["B"])(r.tempOrder.products,(function(t){return Object(c["v"])(),Object(c["d"])("tr",{key:t.id,class:"border-bottom"},[Object(c["h"])("td",null,[Object(c["h"])("img",{src:t.product.imageUrl,alt:"item-photo",style:{"max-width":"60px"}},null,8,["src"]),Object(c["h"])("span",dt,Object(c["F"])(t.product.title),1)]),Object(c["h"])("td",null,Object(c["F"])(t.product.price),1),Object(c["h"])("td",null,Object(c["F"])(t.qty)+" "+Object(c["F"])(t.product.unit),1),Object(c["h"])("td",null,Object(c["F"])(t.final_total),1)])})),128))])]),Object(c["h"])("div",it,[bt,Object(c["h"])("span",ut,"NT"+Object(c["F"])(r.tempOrder.total),1)])])])])]),Object(c["h"])("div",ht,[Object(c["h"])("button",{type:"button",class:"btn btn-primary text-light",onClick:e[8]||(e[8]=function(t){return s.updateOrder(r.tempOrder)})}," 確定 "),mt])])])):Object(c["e"])("",!0),Object(c["h"])(l,{onDelTempOrder:s.delOrder,temp:r.tempOrder,action:r.action,status:a.status,onDelItem:s.delOrder},null,8,["onDelTempOrder","temp","action","status","onDelItem"])],512)}var Ot=a("7b17"),jt={class:"modal-dialog modal-dialog-centered"},ft={class:"modal-content border-0"},gt=Object(c["h"])("div",{class:"modal-header bg-danger text-white"},[Object(c["h"])("h5",{id:"delProductModalLabel",class:"modal-title"},[Object(c["h"])("span",null,"刪除訂單")]),Object(c["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),vt={class:"modal-body"},xt=Object(c["g"])(" 是否刪除 "),yt=Object(c["g"])(" (刪除後將無法恢復)。 "),wt={class:"modal-footer"},_t=Object(c["h"])("button",{type:"button",class:"btn btn-outline-danger","data-bs-dismiss":"modal"}," 取消 ",-1);function Dt(t,e,a,o,r,s){return Object(c["v"])(),Object(c["d"])("div",jt,[Object(c["h"])("div",ft,[gt,Object(c["h"])("div",vt,[xt,Object(c["P"])(Object(c["h"])("strong",{class:"text-danger"}," 訂單序號 : "+Object(c["F"])(a.temp.num),513),[[c["L"],"order"===a.action&&"delete"===a.status]]),yt]),Object(c["h"])("div",wt,[Object(c["h"])("button",{type:"button",class:"btn btn-danger",onClick:e[1]||(e[1]=function(e){return t.$emit("del-item")})}," 確定刪除 "),_t])])])}var $t={props:["temp","action","status"]};$t.render=Dt;var Mt=$t,Tt={props:["status"],components:{OrderDelModal:Mt},data:function(){return{tempOrder:{},date:new Date,action:"order",is_paid:0}},methods:{updateOrder:function(t){var e=this;this.$emit("is-loading",!0),console.log(t);var a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("item666","/admin/order/").concat(t.id);this.tempOrder.total=parseInt(this.tempOrder.total),"true"===this.tempOrder.is_paid?this.tempOrder.is_paid=!0:this.tempOrder.is_paid=!1,this.tempOrder.paid_date=this.DateToTimestamp(this.tempOrder.paid_date),this.$http.put(a,{headers:{"Access-Control-Allow-Origin":"*"},data:this.tempOrder}).then((function(t){e.$emit("is-loading",!1),console.log(t),t.data.success?(e.$emit("get-order"),e.modal.hide(),e.$swal({title:"成功",icon:"success"})):e.$swal({title:t.data.message,icon:"error"})})).catch((function(t){return console.log(t.message)}))},delOrder:function(){var t=this;this.$emit("is-loading",!0);var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("item666","/admin/order/").concat(this.tempOrder.id);this.$http.delete(e).then((function(e){t.$emit("is-loading",!1),console.log(e),e.data.success&&(t.$emit("get-order"),t.modal.hide(),t.$swal({title:"刪除成功",icon:"success"}))})).catch((function(t){return console.log(t)}))},DateToTimestamp:function(t){return Date.parse(t)/1e3},timestampToDate:function(t){if(t){var e=new Date(1e3*t);return"".concat(e.getFullYear(),"-").concat(this.adjustZero(e.getMonth()+1),"-").concat(this.adjustZero(e.getDate()))}},adjustZero:function(t){return t<10?"0".concat(t):"".concat(t)}},mounted:function(){this.modal=new Ot["a"](this.$refs.modal)}};Tt.render=pt;var Ft=Tt,kt={components:{OrderModal:Ft,Pagination:O["a"]},data:function(){return{orderModal:{},orders:[],pagination:{},isDeleteAll:!1,status:"",isLoading:!1,fullPage:!0}},methods:{getOrder:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("item666","/admin/orders?page=").concat(e);this.$http.get(a).then((function(e){e.data.success?(t.orders=e.data.orders,t.pagination=e.data.pagination,console.log(e.data),console.log(e.data.pagination)):(t.isLoading=!1,console.log(e.data.message))}))},adjustStatus:function(t,e,a){if(this.isDeleteAll=t,this.isDeleteAll?this.status="delAll":this.status="put"===a?"put":"delete",e){var c=JSON.parse(JSON.stringify(e));c.paid_date=this.timestampToDate(c.paid_date),this.$refs.modal.tempOrder=c}},timestampToDate:function(t){if(t){var e=new Date(1e3*t);return"".concat(e.getFullYear(),"-").concat(this.adjustZero(e.getMonth()+1),"-").concat(this.adjustZero(e.getDate()))}},adjustZero:function(t){return t<10?"0".concat(t):"".concat(t)},delOrder:function(){var t=this;this.$emit("is-loading",!0);var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("item666","/admin/order/").concat(this.tempOrder.id);"delAll"===this.status&&(e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("item666","/admin/orders/all")),this.$http.delete(e).then((function(e){t.$emit("is-loading",!1),console.log(e),e.data.success&&(t.$emit("get-order"),t.modal.hide(),t.$swal({title:"刪除成功",icon:"success"}))})).catch((function(t){return console.log(t)}))}},created:function(){this.getOrder()}};kt.render=p;e["default"]=kt},8418:function(t,e,a){"use strict";var c=a("c04e"),o=a("9bf2"),r=a("5c6c");t.exports=function(t,e,a){var s=c(e);s in t?o.f(t,s,r(0,a)):t[s]=a}},"99af":function(t,e,a){"use strict";var c=a("23e7"),o=a("d039"),r=a("e8b5"),s=a("861d"),l=a("7b0b"),n=a("50c4"),d=a("8418"),i=a("65f0"),b=a("1dde"),u=a("b622"),h=a("2d00"),m=u("isConcatSpreadable"),p=9007199254740991,O="Maximum allowed index exceeded",j=h>=51||!o((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),f=b("concat"),g=function(t){if(!s(t))return!1;var e=t[m];return void 0!==e?!!e:r(t)},v=!j||!f;c({target:"Array",proto:!0,forced:v},{concat:function(t){var e,a,c,o,r,s=l(this),b=i(s,0),u=0;for(e=-1,c=arguments.length;e<c;e++)if(r=-1===e?s:arguments[e],g(r)){if(o=n(r.length),u+o>p)throw TypeError(O);for(a=0;a<o;a++,u++)a in r&&d(b,u,r[a])}else{if(u>=p)throw TypeError(O);d(b,u++,r)}return b.length=u,b}})},b0c0:function(t,e,a){var c=a("83ab"),o=a("9bf2").f,r=Function.prototype,s=r.toString,l=/^\s*function ([^ (]*)/,n="name";c&&!(n in r)&&o(r,n,{configurable:!0,get:function(){try{return s.call(this).match(l)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-6516ff98.94f88d2f.js.map