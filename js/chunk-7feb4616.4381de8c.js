(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7feb4616"],{"1dde":function(t,e,c){var n=c("d039"),o=c("b622"),a=c("2d00"),s=o("species");t.exports=function(t){return a>=51||!n((function(){var e=[],c=e.constructor={};return c[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"300f":function(t,e,c){"use strict";c("92f7")},"62b3":function(t,e,c){"use strict";c.r(e);var n=c("7a23"),o=Object(n["h"])("div",{class:"banner container-fluid d-flex align-items-center justify-content-center my-5"},[Object(n["h"])("div",{class:"row banner-box p-3 w-100"},[Object(n["h"])("div",{class:"text-white text-center "},[Object(n["h"])("h2",{class:"text-center p-4"},"購物車")])])],-1),a={key:0,class:"container d-flex flex-column align-items-center mt-6"},s={class:"row"},i=Object(n["h"])("div",{class:"col-12"},[Object(n["h"])("h2",{class:"h2 text-center mb-4 fw-bolder"},[Object(n["g"])(" 購物車內"),Object(n["h"])("br"),Object(n["g"])("目前沒有商品唷! ")])],-1),l=Object(n["h"])("h3",{class:"h4 my-2"},"返回購物列表",-1),d={key:1,class:"container my-5"},r={class:"row d-flex justify-content-evenly"},u={class:"col-lg-7 col-md-7 col-12 mb-4"},b=Object(n["h"])("div",{class:"title bg-secondary py-2 text-light text-center"},[Object(n["h"])("h3",null,"購物車品項")],-1),h={class:"bg-table border border-third p-5"},p=Object(n["f"])('<div class="row align-items-center text-center border-bottom border-third"><div class="col-lg-3 col-md-3 col-3"><p>商品</p></div><div class="col-lg-2 col-md-2 col-3"><p>售價</p></div><div class="col-lg-4 col-md-4 col-3"><p>數量</p></div><div class="col-lg-2 col-md-1 col-1 d-flex d-lg-flex d-md-none d-none justify-content-center"><p>小計</p></div><div class="col-lg-2 col-md-3 col-3 d-flex d-lg-none text-center "><p>小計</p></div></div>',1),f={class:"cart-listtext-center"},j={class:"col-lg-3 col-md-3 col-3 d-flex justify-content-center align-item-center m-auto"},O={class:"box d-flex flex-column"},g={class:"d-lg-block d-md-none d-sm-none d-none mt-2"},m={key:0,class:"text-success"},v=Object(n["h"])("p",{class:"d-xl-block d-md-block d-sm-block"},[Object(n["h"])("span",{class:"teext-success text-center"},[Object(n["g"])("優惠劵"),Object(n["h"])("i",{class:"bi bi-patch-check-fill"})])],-1),x={class:"col-lg-2 col-md-2 col-3 d-flex align-items-center justify-content-start"},y={class:"fw-bold "},w={class:"col-lg-3 col-md-4 col-2 text-center m-auto d-flex justify-content-center"},C={class:"d-inline-block d-lg-flex d-md-flex d-sm-flex"},k=Object(n["h"])("i",{class:"bi bi-dash"},null,-1),$={type:"number",class:"px-2 d-flex justify-content-center align-items-center border border-third",min:"1",disabled:""},I=Object(n["h"])("i",{class:"bi bi-plus"},null,-1),_={class:"col-lg-2 col-md-2 col-2 d-flex align-items-center justify-content-center"},S={class:"fw-bold  text-dark"},D={class:"col-lg-1 col-md-1 col-1 d-flex align-items-center"},F={key:0},Q=Object(n["h"])("i",{class:"bi bi-alarm"},"刪除",-1),T=Object(n["h"])("i",{class:"bi bi-trash"},null,-1),q={key:0,class:"next-step my-3 d-flex justify-content-between"},A=Object(n["g"])(" 返回購物 "),N={class:"d-flex justify-content-end"},L={key:0},P=Object(n["h"])("i",{class:"bi bi-trash2"},"清除中",-1),B=Object(n["g"])(" 清空商品 "),E={key:0,class:"col-lg-4 col-md-4 col-12"},J=Object(n["h"])("div",{class:"title bg-secondary p-2 text-light text-center"},[Object(n["h"])("h3",null,"購物車結算")],-1),M={class:"pt-4 border border-third d-flex flex-column align-items-center"},U={key:0,class:"h6 px-3 w-100 d-flex justify-content-between"},K=Object(n["h"])("p",null,"商品總價:",-1),V={class:"text-danger h5 fw-bolder"},z={key:1,class:"coupon-price w-100"},G={class:"h6 px-3 d-flex justify-content-between"},H=Object(n["h"])("p",null,"商品總價:",-1),R={class:"text-dark h6 "},W={class:"h6 px-3 d-flex justify-content-between"},X=Object(n["h"])("p",null,"優惠折抵:",-1),Y={class:"text-warning h6"},Z={class:"h6 px-3 d-flex justify-content-between"},tt=Object(n["h"])("p",{class:"fw-bolder"},"優惠總價:",-1),et={class:"text-danger h6 fw-bolder"},ct={key:2,class:"d-flex justify-content-center w-100 px-3"},nt={class:"input-group-append"},ot=Object(n["h"])("p",{class:"h5"},"進行結帳",-1);function at(t,e,c,at,st,it){var lt=Object(n["C"])("router-link");return Object(n["v"])(),Object(n["d"])("div",null,[o,0==st.cart.carts?(Object(n["v"])(),Object(n["d"])("div",a,[Object(n["h"])("div",s,[i,Object(n["h"])(lt,{to:"/products",class:"btn btn-secondary text-white my-6"},{default:Object(n["O"])((function(){return[l]})),_:1})])])):Object(n["e"])("",!0),st.cart.final_total?(Object(n["v"])(),Object(n["d"])("div",d,[Object(n["h"])("div",r,[Object(n["h"])("div",u,[b,Object(n["h"])("div",h,[p,Object(n["h"])("div",f,[(Object(n["v"])(!0),Object(n["d"])(n["a"],null,Object(n["B"])(st.cart.carts,(function(e){return Object(n["v"])(),Object(n["d"])("div",{key:e.id,loading:st.loadingStatus,class:"row py-3 text-dark text-center p-0 border-bottom"},[Object(n["h"])("div",j,[Object(n["h"])("div",O,[Object(n["h"])("img",{src:e.product.imageUrl,alt:"",style:{"max-width":"80px","min-height":"60px"}},null,8,["src"]),Object(n["h"])("p",g,Object(n["F"])(e.product.title),1),e.coupon?(Object(n["v"])(),Object(n["d"])("div",m,[v])):Object(n["e"])("",!0)])]),Object(n["h"])("div",x,[Object(n["h"])("p",y,Object(n["F"])(e.product.price),1)]),Object(n["h"])("div",w,[Object(n["h"])("div",C,[Object(n["h"])("button",{type:"button",class:["btn btn-outline-third d-flex text-dark border border-third",{disabled:e.qty<=1||st.isChageQty}],onClick:function(t){return it.minusQty(e)}},[k],10,["onClick"]),Object(n["h"])("span",$,Object(n["F"])(e.qty),1),Object(n["h"])("button",{type:"button",class:["btn btn-outline-third d-flex align-items-center text-dark border border-third",{disabled:st.isChageQty}],onClick:function(t){return it.addQty(e)}},[I],10,["onClick"])])]),Object(n["h"])("div",_,[Object(n["h"])("p",S,Object(n["F"])(e.final_total),1)]),Object(n["h"])("div",D,[Object(n["h"])("button",{type:"button",class:"btn btn-sm btn-outline-danger","data-action":"remove","data-id":e.id,onClick:function(t){return it.deleteCart(e.id,e.product.title)}},[(st.loadingStatus.loadingItemId=t.itemId)?(Object(n["v"])(),Object(n["d"])("span",F,[Q])):Object(n["e"])("",!0),T],8,["data-id","onClick"])])],8,["loading"])})),128))]),0!=st.cart.carts?(Object(n["v"])(),Object(n["d"])("div",q,[Object(n["h"])(lt,{to:"/products",class:"btn btn-secondary text-light"},{default:Object(n["O"])((function(){return[A]})),_:1}),Object(n["h"])("div",N,[0!=st.cart.carts?(Object(n["v"])(),Object(n["d"])("button",{key:0,class:"btn btn-outline-danger",type:"button",onClick:e[1]||(e[1]=function(){return it.deleteAllCart&&it.deleteAllCart.apply(it,arguments)})},[1===st.loadingStatus.loadingItem?(Object(n["v"])(),Object(n["d"])("span",L,[P])):Object(n["e"])("",!0),B])):Object(n["e"])("",!0)])])):Object(n["e"])("",!0)])]),st.cart.final_total?(Object(n["v"])(),Object(n["d"])("div",E,[J,Object(n["h"])("div",M,[st.cart.final_total==st.cart.total?(Object(n["v"])(),Object(n["d"])("div",U,[K,Object(n["h"])("span",V,"NT$"+Object(n["F"])(this.cart.total),1)])):(Object(n["v"])(),Object(n["d"])("div",z,[Object(n["h"])("div",G,[H,Object(n["h"])("span",R,"NT$"+Object(n["F"])(this.cart.total),1)]),Object(n["h"])("div",W,[X,Object(n["h"])("span",Y,"NT$"+Object(n["F"])(this.cart.total-st.cart.final_total),1)]),Object(n["h"])("div",Z,[tt,Object(n["h"])("span",et,"NT$"+Object(n["F"])(this.cart.final_total),1)])])),st.cart.final_total?(Object(n["v"])(),Object(n["d"])("div",ct,[Object(n["h"])("div",{class:["input-group input-group-sm",st.show?"":"d-none d-md-none"]},[Object(n["P"])(Object(n["h"])("input",{type:"text",class:"form-control",placeholder:"coupon","onUpdate:modelValue":e[2]||(e[2]=function(t){return st.couponCode=t})},null,512),[[n["K"],st.couponCode]]),Object(n["h"])("div",nt,[Object(n["h"])("button",{class:"btn btn-outline-primary",type:"button",onClick:e[3]||(e[3]=function(){return it.applyCoupon&&it.applyCoupon.apply(it,arguments)}),disabled:""==st.couponCode}," 套用優惠碼 ",8,["disabled"])])],2)])):Object(n["e"])("",!0),Object(n["h"])(lt,{class:"btn bg-primary text-light w-100 mt-4 ",to:"/checkorder"},{default:Object(n["O"])((function(){return[ot]})),_:1})])])):Object(n["e"])("",!0)])])):Object(n["e"])("",!0)])}c("99af");var st=c("e4f3"),it={data:function(){return{show:!0,couponCode:"",productData:[],cart:{},qty:1,tempCartsTotal:"",tempCartsDiscount:"",loadingStatus:{loadingItem:""},form:{user:{name:"",email:"",tel:"",address:""},message:""},isLoading:!1,isChageQty:!1,isDiscount:!1}},methods:{getProductData:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("item666","/products/all");this.$http.get(e).then((function(e){if(e.data.success){var c=e.data,n=c.products,o=c.pagination;t.productData=n,t.pagination=o,console.log(t.productData,t.pagination)}})).catch((function(t){console.log(t)}))},getCart:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("item666","/cart");this.$http.get(e).then((function(e){e.data.success?(t.cart=e.data.data,t.isLoading=!1,st["a"].emit("update-cart")):t.$swal({title:e.data.message,icon:"error"})})).catch((function(t){console.log(t)}))},deleteAllCart:function(){var t=this;this.loadingStatus.loadingItem=1;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("item666","/carts");this.$http.delete(e).then((function(e){e.data.success&&(t.loadingStatus.loadingItem="",t.$swal({title:"已將購物車內商品全部刪除",icon:"success"}),t.getCart())})).catch((function(t){console.log(t)}))},deleteCart:function(t,e){var c=this;this.loadingStatus.loadingItemId=t;var n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("item666","/cart/").concat(t);this.$http.delete(n).then((function(t){t.data.success?(c.$swal({title:e+t.data.message,icon:"success"}),c.loadingStatus.loadingItemId="",c.getCart(),console.log(t)):alert(t.data.message)})).catch((function(t){console.log(t)}))},editCart:function(t,e){var c=this,n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("item666","/cart/").concat(e);this.$http.put(n,{data:{product_id:e,qty:t}}).then((function(t){t.data.success&&(st["a"].emit("update-cart"),c.getCart())})).catch((function(t){console.log(t)}))},addQty:function(t){this.loadingStatus.loadingItem=t.id;var e=t.qty+1;this.editCart(e,t.id),console.log(e,t.id)},minusQty:function(t){this.loadingStatus.loadingItem=t.id;var e=t.qty-1;this.editCart(e,t.id)},applyCoupon:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("item666","/coupon"),c={code:this.couponCode};this.$http.post(e,{data:c}).then((function(e){e.data.success?(t.getCart(),t.$swal({title:"成功使用優惠劵",icon:"success"}),console.log(e.data),t.show=!1,t.$refs.done.classList.add("show"),t.couponCode=""):t.$swal({title:"找不到此優惠劵，請重新確認",icon:"error"})})).catch((function(t){console.log(t)}))}},watch:{datas:function(t){t.final_total!==t.total?this.isDiscount=!0:this.isDiscount=!1}},mounted:function(){this.getProductData(),this.getCart()},created:function(){console.clear()}};c("300f");it.render=at;e["default"]=it},8418:function(t,e,c){"use strict";var n=c("c04e"),o=c("9bf2"),a=c("5c6c");t.exports=function(t,e,c){var s=n(e);s in t?o.f(t,s,a(0,c)):t[s]=c}},"92f7":function(t,e,c){},"99af":function(t,e,c){"use strict";var n=c("23e7"),o=c("d039"),a=c("e8b5"),s=c("861d"),i=c("7b0b"),l=c("50c4"),d=c("8418"),r=c("65f0"),u=c("1dde"),b=c("b622"),h=c("2d00"),p=b("isConcatSpreadable"),f=9007199254740991,j="Maximum allowed index exceeded",O=h>=51||!o((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),g=u("concat"),m=function(t){if(!s(t))return!1;var e=t[p];return void 0!==e?!!e:a(t)},v=!O||!g;n({target:"Array",proto:!0,forced:v},{concat:function(t){var e,c,n,o,a,s=i(this),u=r(s,0),b=0;for(e=-1,n=arguments.length;e<n;e++)if(a=-1===e?s:arguments[e],m(a)){if(o=l(a.length),b+o>f)throw TypeError(j);for(c=0;c<o;c++,b++)c in a&&d(u,b,a[c])}else{if(b>=f)throw TypeError(j);d(u,b++,a)}return u.length=b,u}})},e4f3:function(t,e,c){"use strict";var n=function(t){return{all:t=t||new Map,on:function(e,c){var n=t.get(e);n?n.push(c):t.set(e,[c])},off:function(e,c){var n=t.get(e);n&&(c?n.splice(n.indexOf(c)>>>0,1):t.set(e,[]))},emit:function(e,c){var n=t.get(e);n&&n.slice().map((function(t){t(c)})),(n=t.get("*"))&&n.slice().map((function(t){t(e,c)}))}}},o=n();e["a"]=o}}]);
//# sourceMappingURL=chunk-7feb4616.4381de8c.js.map